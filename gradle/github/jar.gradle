jar {
  // we dont need jar task which just creates *-plain.jar
  enabled = false
}

bootJar {
  archiveFileName = "${rootProject.name}-${project.version}.jar"

  manifest {
    attributes('Implementation-Version': project.version.toString())
  }
}

tasks.named('composeBuild') {
  dependsOn tasks.named('bootJar')
}

tasks.withType(AbstractArchiveTask).configureEach {
  preserveFileTimestamps = false
  reproducibleFileOrder = true
}
